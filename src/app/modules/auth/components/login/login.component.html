<main>
  <div class="box">
    <div class="inner-box">
      <div class="forms-wrap">
        <div class="logo">
          <a class="navbar-brand" routerLink='/'>Ethereal Charm</a>
        </div>
        <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="sign-in-form" novalidate>
          <div class="heading">
            <h2>Zaloguj się</h2>
            <h6>Nie masz konta?</h6><br>
            <a routerLink="/register" class="toggle">Zarejestruj się</a>
          </div>

          <div class="actual-form">
            <div class="form-input">
              <input class="input-field" type="text" [formControl]="controls.login" required/>
              <label>E-mail lub login</label>
            </div>
            <div class="control-err">
              <mat-error *ngIf="controls.login.invalid && submitted">
                {{ getErrorMessage(controls.login) }}
              </mat-error>
            </div>
            <div class="form-input">
              <input
                type="password"
                class="input-field"
                [formControl]="controls.password"
                required
                [type]="showPassword ? 'text' : 'password'"
              />
              <label>Hasło</label>
              <button
                type="button"
                class="password-toggle"
                (click)="togglePasswordVisibility()"
              >
                <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-eye">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
                  <path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" />
                </svg>
                <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-eye-off">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M10.585 10.587a2 2 0 0 0 2.829 2.828" />
                  <path d="M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87" />
                  <path d="M3 3l18 18" />
                </svg>
              </button>
            </div>
            <div class="control-err">
              <mat-error *ngIf="controls.password.invalid && submitted">
                {{ getErrorMessage(controls.password) }}
              </mat-error>
            </div>
          </div>

          <div class="alert alert-danger alert-dismissible fade show mt-2" role="alert" *ngIf="errorMsg$ | async as error">
            {{ error }}
          </div>

          <div class="mt-2 spinner-wrapper" *ngIf="loading$ | async">
            <mat-progress-spinner diameter="20" strokeWidth="3" mode="indeterminate" [style.--mdc-circular-progress-active-indicator-color]="'#8c6464'"></mat-progress-spinner>
            <span>Trwa logowanie...</span>
          </div>

          <div class="d-flex justify-content-end">
            <button class="sign-btn">
              Zaloguj się
            </button>
          </div>

          <p class="text">
            Zapomniałeś hasła?
            <a routerLink="/password-recovery">Odzyskaj hasło</a>
          </p>
        </form>
      </div>
      <div class="side-photo"></div>
    </div>
  </div>
</main>
<app-cookie-notify></app-cookie-notify>
